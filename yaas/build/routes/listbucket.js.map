{"version":3,"sources":["routes/listbucket.js"],"names":[],"mappings":";;;;;;;;;;;;;;;;;gCAQ6B,sBAAsB;;;;wBACtB,UAAU;;;;uBACV,SAAS;;;;oBACT,MAAM;;;;uBACN,UAAU;;;;kBACV,IAAI;;;;oBACJ,MAAM;;;;sBACN,QAAQ;;;;AAErC,SAAS,UAAU,CAAE,GAAG,EAAE,GAAG,EAAE;;;AAG3B,QAAI,GAAG,GAAG,kBAAkB,CAAC;;;AAG7B,QAAI,cAAc,GAAG,8BAAa,WAAW,EAAE,CAAC;;AAEhD,WAAO,0BAAY,UAAC,OAAO,EAAK;AAC5B,wBAAG,OAAO,CAAC,cAAc,CAAC,MAAM,CAAC,MAAM,CAAC,QAAQ,EAAE,UAAS,GAAG,EAAE,KAAK,EAAE;AACnE,iBAAK,GAAG,KAAK,CAAC,MAAM,CAAC,kBAAK,GAAG,CAAC,CAAC;AAC/B,gBAAI,OAAO,GAAG,KAAK,CAAC,GAAG,CAAC,UAAU,QAAQ,EAAE;AACxC,uBAAO,0BAAQ,cAAc,CAAC,MAAM,CAAC,MAAM,CAAC,IAAI,EAAE,QAAQ,CAAC,CAAC;aAC/D,CAAC,CAAC;AACH,eAAG,CAAC,IAAI,CAAC,EAAC,OAAO,EAAP,OAAO,EAAC,CAAC,CAAC;SACvB,CAAC,CAAC;AACH,eAAO,CAAC,EAAG,CAAC,CAAC;KAChB,CAAC,CAAC;CACN;;qBAEc,UAAU","file":"routes/listbucket.js","sourcesContent":["/**\n * Created by r1cebank on 8/22/15.\n */\n\n/*!\n *  This is the list bucket route, does only one thing, list all buckets in index file\n */\n\nimport AppSingleton     from '../util/appsingleton';\nimport Promise          from 'bluebird';\nimport Shortid          from 'shortid';\nimport Path             from 'path';\nimport UrlJoin          from 'url-join';\nimport Fs               from 'fs';\nimport Junk             from 'junk';\nimport _                from 'lodash';\n\nfunction listbucket (req, res) {\n\n    //  Log tag\n    let TAG = \"route:listbucket\";\n\n    //  Get shared instance from singleton\n    var sharedInstance = AppSingleton.getInstance();\n\n    return new Promise((resolve) => {\n        Fs.readdir(sharedInstance.config.server.database, function(err, files) {\n            files = files.filter(Junk.not);\n            var buckets = files.map(function (filename) {\n                return UrlJoin(sharedInstance.config.server.host, filename);\n            });\n            res.send({buckets});\n        });\n        resolve({ });\n    });\n}\n\nexport default listbucket;"],"sourceRoot":"/source/"}